{"./":{"url":"./","title":"关于洞察2","keywords":"","body":"洞察 II 愿景：让用户快速方便快捷地进行风险管理 ，更加直观和实时地了解和处置安全隐患。 提升漏洞修复效率，同时进行安全风险管理功能联动。 项目主页 文档 Docker-Compose 快速开始 1. 洞察是什么？ 洞察由宜信安全部开发，集成应用系统资产管理、漏洞全生命周期管理、安全知识库管理三位一体的管理平台。 本次全新的洞察2.0版本，产品初衷让用户方便快捷地进行风险管理 ，更加直观和实时地了解和处置自己的安全隐患。提升漏洞修复效率，同时进行安全风险管理功能联动。 产品化繁为简，使用便携，才会让人更加专注。上手容易，才能令人由浅入深使用。功能简化，专业程度才会更强。大多数企业都有适合自己环境的安全平台，功能上想要面面俱到很难。 2. 选择洞察2.0的理由 产品维度 开源免费! 帮助用户直观地了解安全风险情况 易于扩展，方便企业根据自身需求进行二次开发，上手和接入成本低。 技术维度： 易于集成到现有系统：前后端分离，文档完备，接口简单清晰，Restful API 同时支持Python2/3环境 部署简单，支持docker compose一键构建 3. 技术架构 最NB的并不一定是最适合的，延续了1.0的风格，洞察2.0 依旧没有采用炫酷的UI和技术架构。 后端：Python，MySQL，Redis 前端：Vue全家桶 4. 适用人群 洞察1.0 的老朋友们！！！ 对漏洞管理刚需但又迫于研发资源短缺的团队。 依赖安全风险管理的非盈利组织。 其他有安全风险管理需求或兴趣之人士。 欢迎安全小伙伴使用、交流、fork、star、转发。 也欢迎安全小伙伴在使用洞察过程中和我们多多交流，扫描下方二维码，关注宜信安全应急响应中心公众号，回复“自己的微信号+洞察”，我们的运营小姐姐会拉你进群讨论。 Copyright Cesec Dev Team 2020 all right reserved，powered by Gitbook该文章修订时间： 2020-07-09 15:52:30 "},"chapter1/":{"url":"chapter1/","title":"1.快速开始","keywords":"","body":"1.快速开始 Docker部署很方便，也可以使用源码部署，更为自由。不管怎样，适合你就好。 Copyright Cesec Dev Team 2020 all right reserved，powered by Gitbook该文章修订时间： 2020-06-29 15:54:58 "},"chapter1/section1.html":{"url":"chapter1/section1.html","title":"1.1 Docker-Compose部署","keywords":"","body":"1.1 docker-compose部署 洞察2 一键启动简介 采用docker-compose 启动mysql,redis,服务 (1) 使用Docker Compose docker-compose git clone https://github.com/creditease-sec/insight2_docker.git cd insight2_docker sudo docker-compose up (2) 系统登录 地址：http://localhost:8000 帐号：admin 密码：admin!Aa2020 后台地址：http://localhost:8000/#/admin (3) 版本更新 docker-compose pull && docker-compose up or sudo docker-compose pull && sudo docker-compose up Docker-compose.yml 配置说明 version: '2' services: # Mysql数据库服务 web_mysql: image: \"daocloud.io/mysql:5.7\" restart: always hostname: web_mysql # 目录映射及初始化数据库 volumes: - \"./mysql:/var/lib/mysql\" - \"./init:/docker-entrypoint-initdb.d/\" # 端口映射, docker 内部访问可不对外开放 ports: - \"3306:3306\" # 配置数据库密码 environment: MYSQL_ROOT_PASSWORD: \"crediteaseitsec\" # Redis 服务 web_redis: image: \"daocloud.io/redis\" restart: always hostname: web_redis # redis启动命令及密码 command: redis-server --requirepass \"crediteaseitsec\" # 端口映射, docker 内部访问可不对外开放 ports: - \"6379:6379\" # 洞察后端 backend: image: \"crediteaseitsec/insight2\" restart: always # 端口映射, docker 内部访问可不对外开放 ports: - \"8001:8000\" # 日志目录映射 volumes: - \"./backend_logs:/app/insight2/logs\" # 后端使用supervisor启动 command: - /usr/bin/bash - -c - | supervisord -c /app/insight2/supervisord.conf while true;do sleep 100;done depends_on: - \"web_mysql\" - \"web_redis\" links: - \"web_mysql\" - \"web_redis\" # 洞察前端 front: image: \"crediteaseitsec/insight2_front\" restart: always # 对外访问端口映射，需要配置，数据库，redis，后端都属于docker 内部访问，可不进行端口映射 ports: - \"8000:80\" # 日志目录映射 volumes: - \"./front_logs:/logs\" depends_on: - \"backend\" Copyright Cesec Dev Team 2020 all right reserved，powered by Gitbook该文章修订时间： 2020-07-09 10:05:32 "},"chapter1/section2.html":{"url":"chapter1/section2.html","title":"1.2 版本更新","keywords":"","body":"1.2 版本更新 Docker-Compose方式版本更新 docker-compose pull && docker-compose up or sudo docker-compose pull && sudo docker-compose up Copyright Cesec Dev Team 2020 all right reserved，powered by Gitbook该文章修订时间： 2020-06-29 15:43:59 "},"chapter1/section3.html":{"url":"chapter1/section3.html","title":"1.3 源码部署","keywords":"","body":"1.3 源码部署 洞察2 源码部署简介 采用源码部署insight2服务 (1) 准备Mysql服务, Redis服务, Python3.7环境。 Mysql Docker 启动 Redis Docker 启动 (2) Mysql数据库初始化 mysql -u user -p password -h host (3) 依赖 yum install -y epel-release wget gcc make zlib-devel libffi-devel bind-utils openssl-devel supervisor crontabs.noarch pip install -r requirements.txt (3) 配置文件修改 DEBUG = True # 服务默认端口 PORT = 8000 # 数据库配置 DB_HOST = 'web_mysql' DB_PORT = 3306 DB_NAME = 'insight2' DB_USER = 'root' DB_PASS = 'crediteaseitsec' # Redis配置 REDIS_HOST = 'web_redis' REDIS_PORT = 6379 REDIS_PASS = 'crediteaseitsec' REDIS_DB = 0 REDIS_CHANNEL = \"SERVICE_CHANNEL\" ACTION_DIR_NAME = (\"action\", ) STATIC_DIR_NAME = \"upload\" TEMPLATE_DIR_NAME = \"template\" COOKIE_SECRET = \"kG6QcnqzQAGqE2zg2DYyv8q19f78zUz7nvH/KkoodTY=\" # 接口前缀 API_VERSION = \"/api\" # 洞察1 数据迁移使用，可不做配置，如果进行数据迁移，请配置成洞察1数据库信息。 FROM_DB = dict( host = 'web_mysql', port = 3306, user = \"root\", password = \"crediteaseitsec\", database = \"insight\" ) (4) backend 服务启动 python run.py --config=settings.py --port=8000 python service.py --config=settings.py 启动linux系统cron服务 或者 supervisord -c supervisord.conf (5) 目录介绍 . ├── action //RequestHandler接口文件 ├── init // 数据库初始化sql ├── logic // 逻辑代码 ├── logs // 日志目录 ├── static // 前端编译完成将dist/static下的静态文件拷贝到此目录;将index.html拷贝到此目录下 │ ├── css │ ├── fonts │ ├── img │ └── js ├── template ├── tornadoweb // tornado 封装 ├── transfer_data // 数据迁移 Copyright Cesec Dev Team 2020 all right reserved，powered by Gitbook该文章修订时间： 2020-08-17 10:14:25 "},"chapter1/section4.html":{"url":"chapter1/section4.html","title":"1.4 服务配置","keywords":"","body":"1.4 服务配置 Copyright Cesec Dev Team 2020 all right reserved，powered by Gitbook该文章修订时间： 2020-06-29 15:55:59 "},"chapter1/section5.html":{"url":"chapter1/section5.html","title":"1.5 从洞察1迁移数据","keywords":"","body":"1.5 洞察1数据迁移 (1) 配置文件修改 DEBUG = True # 服务默认端口 PORT = 8000 # 数据库配置 DB_HOST = 'web_mysql' DB_PORT = 3306 DB_NAME = 'insight2' DB_USER = 'root' DB_PASS = 'crediteaseitsec' ... # 配置成洞察1数据库信息。 FROM_DB = dict( host = 'web_mysql', port = 3306, user = \"root\", password = \"crediteaseitsec\", database = \"insight\" ) (2) Mysql数据库初始化 myql -u user -p password -h host (3) 数据迁移执行命令 python run.py --init=data Copyright Cesec Dev Team 2020 all right reserved，powered by Gitbook该文章修订时间： 2020-06-29 14:13:01 "},"chapter2/":{"url":"chapter2/","title":"2.使用举例","keywords":"","body":"2.使用举例 常用操作举例，不断更新。 Copyright Cesec Dev Team 2020 all right reserved，powered by Gitbook该文章修订时间： 2020-06-29 15:56:29 "},"chapter2/section1.html":{"url":"chapter2/section1.html","title":"2.1 添加资产和应用","keywords":"","body":"2.1 添加资产和应用 添加资产 添加应用时关联资产 Copyright Cesec Dev Team 2020 all right reserved，powered by Gitbook该文章修订时间： 2020-06-29 14:29:05 "},"chapter2/section2.html":{"url":"chapter2/section2.html","title":"2.2 添加漏洞","keywords":"","body":"2.2 添加漏洞 添加漏洞之前，需要创建好应用，为了防止漏洞无法关联到业务应用，关联应用为必填项。 其中，关联解决方案的来源为知识-文章，选填。 漏洞详情 Copyright Cesec Dev Team 2020 all right reserved，powered by Gitbook该文章修订时间： 2020-06-29 14:44:25 "},"chapter2/section3.html":{"url":"chapter2/section3.html","title":"2.3 漏洞处理流程","keywords":"","body":"2.3 漏洞处理流程 Copyright Cesec Dev Team 2020 all right reserved，powered by Gitbook该文章修订时间： 2020-06-29 15:01:51 "},"chapter2/section3_1.html":{"url":"chapter2/section3_1.html","title":"2.3.1 安全官（后台）","keywords":"","body":"2.3.1 安全官（后台） 在想要审核的漏洞空白处点击，右上角会出现审核按钮 审核时可填写具体信息，将私信给漏洞提交者 当漏洞修复完成，普通用户会提交复测，漏洞状态变为复测中，这时安全官收到邮件，进行漏洞复测，测试完毕后进行漏洞复测信息提交 最后,漏洞状态为已完成。 Copyright Cesec Dev Team 2020 all right reserved，powered by Gitbook该文章修订时间： 2020-06-29 15:01:03 "},"chapter2/section3_2.html":{"url":"chapter2/section3_2.html","title":"2.3.2 普通用户（前台）","keywords":"","body":"2.3.2 普通用户（前台） 漏洞在后台审核后，会通过 漏洞->应用->用户组 将漏洞具体链接群发。 收到邮件，普通用户（通常为业务研发相关人员）在前台查阅具体详情，然后点击已知悉,此刻漏洞状态为修复中 待漏洞修复后，再点击申请复测，此时会通知安全相关人员进行漏洞修复后的再次测试 等待安全官复测 Copyright Cesec Dev Team 2020 all right reserved，powered by Gitbook该文章修订时间： 2020-06-29 14:57:28 "},"chapter3/":{"url":"chapter3/","title":"3.功能与配置","keywords":"","body":"3.功能与配置 Copyright Cesec Dev Team 2020 all right reserved，powered by Gitbook该文章修订时间： 2020-06-29 15:56:55 "},"chapter4/section1.html":{"url":"chapter4/section1.html","title":"3.1 面板","keywords":"","body":"3.1 面板 Copyright Cesec Dev Team 2020 all right reserved，powered by Gitbook该文章修订时间： 2020-06-29 15:51:42 "},"chapter4/section2.html":{"url":"chapter4/section2.html","title":"3.2 漏洞","keywords":"","body":"3.2 漏洞 时间线 Copyright Cesec Dev Team 2020 all right reserved，powered by Gitbook该文章修订时间： 2020-07-07 15:59:49 "},"chapter4/section3.html":{"url":"chapter4/section3.html","title":"3.3 资产","keywords":"","body":"3.3 资产 Copyright Cesec Dev Team 2020 all right reserved，powered by Gitbook该文章修订时间： 2020-06-08 14:51:27 "},"chapter4/section4.html":{"url":"chapter4/section4.html","title":"3.4 用户","keywords":"","body":"3.4 用户 用户组拥有者变更 Copyright Cesec Dev Team 2020 all right reserved，powered by Gitbook该文章修订时间： 2020-06-29 15:12:18 "},"chapter4/section5.html":{"url":"chapter4/section5.html","title":"3.5 知识","keywords":"","body":"3.5 知识 支持Markdown和富文本两种方式编写 Copyright Cesec Dev Team 2020 all right reserved，powered by Gitbook该文章修订时间： 2020-06-29 15:52:23 "},"chapter4/section6.html":{"url":"chapter4/section6.html","title":"3.6 扩展","keywords":"","body":"3.6 扩展 扩展开发文档 1. 扩展类型支持 \"0\":\"安全扫描\" \"1\":\"资产收集\" \"2\":\"通知\" \"3\":\"授权\" \"4\":\"持续集成\" \"5\":\"事件响应\" \"6\":\"工作流\" \"7\":\"安全验证\" 2. 扩展示例 开发目录： init.py main.py 主文件 config.json 配置文件 logo.png 图标 main.py #!usr/bin/env python #-*- coding:utf-8 -*- def main(*args, **kwargs): print (args, kwargs) 示例下载 Copyright Cesec Dev Team 2020 all right reserved，powered by Gitbook该文章修订时间： 2020-07-09 18:19:15 "},"chapter4/section7.html":{"url":"chapter4/section7.html","title":"3.7 配置","keywords":"","body":"3.7 配置 邮箱配置 Copyright Cesec Dev Team 2020 all right reserved，powered by Gitbook该文章修订时间： 2020-06-09 10:52:59 "},"chapter4/section7-1.html":{"url":"chapter4/section7-1.html","title":"3.7.1 系统配置","keywords":"","body":"3.7.1 系统配置 站点地址配置 会在发送邮件时使用，单击测试时，应该设置为http://localhost:8080 ，具体根据部署的域名进行设置即可 LDAP配置 登录名属性(AD用户属性)：UserPrincipalName与SamAccountName UserPrincipalName： 用户登录名格式：xiaowen@azureyun.com 是基于Internet标准RFC 822的用户Internet样式登录名; 在目录林中的所有安全主体对象中应该是唯一的; UPN是可选的，在创建用户帐户时可指定也可不单独指定； SamAccountName： 与早期版本的Windows（pre-windows 2000）一起使用; 用户登录名格式：azureyun\\xiaowen 不能超过20个字符； 在域中的所有安全主体对象中是唯一的； 参考:AD用户属性：UserPrincipalName与SamAccountName的差别 配置测试 如下图，点击测试按钮： Copyright Cesec Dev Team 2020 all right reserved，powered by Gitbook该文章修订时间： 2020-11-30 17:19:50 "},"chapter4/section7-2.html":{"url":"chapter4/section7-2.html","title":"3.7.2 全局变量配置","keywords":"","body":"3.7.2 全局变量配置 文件路径 logic/define.py 举例， 新增漏洞来源安服测试: VUL_SOURCE = {\"10\": \"安全部\", \"20\":\"CESRC\", \"30\": \"YISRC\", \"40\":\"公众平台\", \"50\": \"合作伙伴\"} 修改为 VUL_SOURCE = {\"10\": \"安全部\", \"20\":\"CESRC\", \"30\": \"YISRC\", \"40\":\"公众平台\", \"50\": \"合作伙伴\",\"60\":\"安服测试\"} 以下为全部文件内容，供参考： #!encoding=utf8 from collections import OrderedDict # 漏洞类型 VUL_TYPE = {\"10\": \"SQL注入漏洞\", \"15\": \"XSS跨站漏洞\", \"20\": \"命令执行漏洞\", \"25\": \"代码执行漏洞\", \"30\": \"文件包含漏洞\", \"35\": \"任意文件操作\", \"40\": \"权限绕过\", \"45\": \"逻辑漏洞\", \"50\": \"存在后门\", \"55\": \"信息泄露\", \"60\": \"文件上传\", \"65\": \"弱口令\", \"70\": \"威胁情报\", \"75\": \"其他\" } # 漏洞等级 VUL_LEVEL = {\"10\": \"严重\", \"20\": \"高危\", \"30\": \"中危\", \"40\": \"低危\"} # 漏洞状态 VUL_STATUS = {\"10\": \"待审核\", \"20\": \"已忽略\", \"30\": \"已驳回\", \"35\": \"暂不处理\", \"40\": \"已确认\", \"50\": \"修复中\", \"55\": \"复测中\", \"60\": \"已完成\"} VUL_ACTION = OrderedDict() VUL_ACTION[\"/auditing/confirm\"] = \"确认\" VUL_ACTION[\"/auditing/ignore\"] = \"忽略\" VUL_ACTION[\"/auditing/reject\"] = \"驳回\" VUL_ACTION[\"/auditing/undo\"] = \"暂不处理\" # ACTION = {\"确认 comfirm\": 40, \"已知悉(开始修复)\": 50, \"申请复测\": 55, \"提交复测结果\": \"60/40\"} # 漏洞来源 VUL_SOURCE = {\"10\": \"安全部\", \"20\":\"CESRC\", \"30\": \"YISRC\", \"40\":\"公众平台\", \"50\": \"合作伙伴\"} # 漏洞层面 VUL_LAYER = {\"10\": \"代码\", \"20\":\"运维\"} # 资产等级 ASSET_LEVEL = {\"10\": \"一级\", \"20\": \"二级\", \"30\": \"三级\", \"40\": \"其他\"} # 资产类型 ASSET_TYPE = {\"10\": \"域名\", \"20\": \"IP\"} ASSET_APP_TYPE = {\"10\": \"服务器\", \"20\": \"数据库\", \"30\": \"Nginx\"} # 应用类型 APP_TYPE = {\"10\": \"APP\", \"20\": \"WEB应用\", \"30\": \"APP和WEB应用\"} # 应用安全等级 APP_SEC_LEVEL = {\"10\": \"安全一级\", \"20\": \"安全二级\", \"30\": \"安全三级\", \"40\": \"其他\"} # 应用状态 APP_STATUS = {\"10\": \"线上\", \"20\": \"上线前\", \"30\": \"下线\"} # 应用敏感数据条数 APP_SENSITIVE_DATA_COUNT = {\"10\": \"几十\", \"20\": \"几百\", \"30\": \"几千\", \"40\": \"几万\"} # 应用宕机时常 APP_DOWNTIME = {\"10\": \"几分钟\", \"20\": \"几十分钟\", \"30\": \"几小时\", \"40\": \"几天\"} # 认证类型 AUTH_MODE = [\"LDAP\"] # 关联权限 RELATE_ACCESS = {\"action.assets.AssetAdd\": [\"action.group.GroupList\"]} # 扩展类型 EXTENSION_TYPE = {\"0\": \"安全扫描\", \"1\": \"资产收集\", \"2\": \"通知\", \"3\":\"授权\", \"4\":\"持续集成\", \"5\":\"事件响应\", \"6\":\"工作流\", \"7\": \"安全验证\"} #安全类型测试 SEC_UTEST_TYPE = {\"0\": \"手动测试\", \"1\": \"外包测试\", \"2\": \"扫描器测试\", \"3\": \"脚本测试\"} Copyright Cesec Dev Team 2020 all right reserved，powered by Gitbook该文章修订时间： 2020-06-29 15:06:16 "},"chapter4/section8.html":{"url":"chapter4/section8.html","title":"3.8 默认规则","keywords":"","body":"3.8 其他 Copyright Cesec Dev Team 2020 all right reserved，powered by Gitbook该文章修订时间： 2020-06-08 14:51:27 "},"chapter4/section8-1.html":{"url":"chapter4/section8-1.html","title":"3.8.1 逾期计算","keywords":"","body":"3.8.1 逾期计算 根据rank值和资产等级level计算 if level == 10: if 15 Copyright Cesec Dev Team 2020 all right reserved，powered by Gitbook该文章修订时间： 2020-08-17 10:14:25 "},"chapter4/section8-2.html":{"url":"chapter4/section8-2.html","title":"3.8.2 积分称号","keywords":"","body":"3.8.2 积分称号 Copyright Cesec Dev Team 2020 all right reserved，powered by Gitbook该文章修订时间： 2020-06-29 14:12:48 "},"chapter4/section9.html":{"url":"chapter4/section9.html","title":"3.9 其他","keywords":"","body":"3.9 其他 Copyright Cesec Dev Team 2020 all right reserved，powered by Gitbook该文章修订时间： 2020-06-29 14:12:48 "},"chapter5/":{"url":"chapter5/","title":"4.常见问题","keywords":"","body":"4.常见问题 Copyright Cesec Dev Team 2020 all right reserved，powered by Gitbook该文章修订时间： 2020-06-08 14:51:27 "},"chapter5/FAQ.html":{"url":"chapter5/FAQ.html","title":"4.1 FAQ","keywords":"","body":"4.1 FAQ 1.每天自动发送的邮件我能看到记录吗？ [ 后台-扩展-日志 ]中，可以查看 2.Docker镜像拉取速度慢怎么办？ 国内镜像正在构建 daocloud.io/crediteaseitsec/insight2_front daocloud.io/crediteaseitsec/insight2 3. Windows 下报错，请问如何解决？ 不建议直接在Windows部署， 建议在Linux或装有Linux系统的虚拟机上部署 4. 报错redis.exceptions.ResponseError: value is not an integer or out of range 使用Redis 3.X 版本 Copyright Cesec Dev Team 2020 all right reserved，powered by Gitbook该文章修订时间： 2020-08-24 15:31:42 "},"chapter5/section2.html":{"url":"chapter5/section2.html","title":"4.2 前端","keywords":"","body":"4.2 前端 基于Vue.js 2.x系列 + Element UI . 目录结构介绍 |-- build // webpack配置文件 |-- config // 项目打包路径 |-- src // 源码目录 | |-- components // 组件 | |-- common // 公共组件 | |-- bus.js // Event Bus | |-- Header.vue // 公共头部 | |-- Home.vue // 公共路由入口 | |-- Sidebar.vue // 公共左边栏 | |-- page // 主要路由页面 | |-- 403.vue | |-- 404.vue | |-- Dashboard.vue //面板 | |-- Login.vue //登录 | |-- Setting.vue //系统配置 | |-- Notification.vue //消息通知 | |-- router // 路由 | |-- App.vue // 页面入口文件 | |-- main.js // 程序入口文件，加载各种公共组件 |-- .babelrc // ES6语法编译配置 |-- .editorconfig // 代码编写规格 |-- .gitignore // 忽略的文件 |-- index.html // 入口html文件 |-- package.json // 项目及工具的依赖配置文件 |-- README.md // 说明 安装步骤 git clone https://github.com/creditease-sec/insight2_front // 下载到本地 cd insight2_front // 进入目录 npm install // 安装项目依赖，等待安装完成之后 本地开发 // 开启服务器，浏览器访问 http://localhost:8080 npm run dev 构建生产 // 执行构建命令，生成的dist文件夹放在服务器下即可访问 npm run build Copyright Cesec Dev Team 2020 all right reserved，powered by Gitbook该文章修订时间： 2020-07-09 16:02:09 "},"end/":{"url":"end/","title":"结束","keywords":"","body":"结束 鸣谢： 主程：9wfox 产品兼前端:ark1ee 洞察1-2技术：李明 策划运营：团长 安全测试：剑哥 官方交流群,可添加公众号 宜信应急响应中心，后台回复加群 Copyright Cesec Dev Team 2020 all right reserved，powered by Gitbook该文章修订时间： 2020-07-09 17:05:15 "}}